<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RHAT - Settings</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="options">
    <!-- Compact Mode Toggle Button -->
    <button id="compactModeToggle" class="compact-toggle-btn" title="Toggle compact view">
      üì±
    </button>
    
    <div class="options-container">
      <header class="options-header">
        <div class="header-content">
          <h1 class="options-title">
            <span class="title-icon">üéØ</span>
            RHAT
          </h1>
          <p class="options-subtitle">
            RaterHub Automated Tasks - Configure your monitoring preferences
          </p>
        </div>
      </header>

      <main class="options-main">
        <!-- Tab Navigation -->
        <div class="tabs-container">
          <div class="tabs">
            <button class="tab-btn active" data-tab="main-settings">
              <span class="tab-icon">‚öôÔ∏è</span>
              Main Settings
            </button>
            <button class="tab-btn" data-tab="filtering">
              <span class="tab-icon">üéØ</span>
              Filtering
            </button>
          </div>
        </div>

        <!-- Main Settings Tab -->
        <div id="main-settings" class="tab-content active">
          <section class="settings-section">
            <div class="section-header">
              <h2 class="section-title">General Settings</h2>
              <p class="section-description">
                Control when and how the monitor operates
              </p>
            </div>

            <div class="settings-grid">
              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Monitor Status</h3>
                  <label class="toggle-switch large">
                    <input type="checkbox" id="enabledToggle" />
                    <span class="slider"></span>
                  </label>
                </div>
                <p class="setting-description">
                  Enable or disable the automatic task monitoring
                </p>
                <div class="status-indicator">
                  <div class="status-dot" id="statusDot"></div>
                  <span id="statusText">Disabled</span>
                </div>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Operation Mode</h3>
                  <div class="mode-selector">
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="mode"
                        value="alarm_only"
                        id="alarmOnlyMode"
                      />
                      <span class="radio-custom"></span>
                      <div class="radio-content">
                        <strong>Alarm only</strong>
                        <small
                          >Play sound notification when tasks are available</small
                        >
                      </div>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="mode"
                        value="alarm_and_click"
                        id="alarmAndClickMode"
                      />
                      <span class="radio-custom"></span>
                      <div class="radio-content">
                        <strong>Alarm & acquire</strong>
                        <small
                          >Play sound and automatically click "Acquire if
                          available"</small
                        >
                      </div>
                    </label>
                  </div>
                </div>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Refresh Interval</h3>
                  <div class="interval-selector">
                    <div class="interval-options">
                      <button class="interval-btn active" data-value="1">1s</button>
                      <button class="interval-btn" data-value="2">2s</button>
                      <button class="interval-btn" data-value="5">5s</button>
                      <button class="interval-btn" data-value="10">10s</button>
                      <button class="interval-btn" data-value="30">30s</button>
                      <button class="interval-btn" data-value="60">60s</button>
                    </div>
                    <p class="interval-display">
                      Currently refreshing every
                      <span id="currentInterval">1</span> second(s)
                    </p>
                  </div>
                </div>
                <p class="setting-description">
                  How frequently to check for available tasks when monitoring is
                  active
                </p>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Alert Sound</h3>
                </div>
                <div class="setting-content">
                  <div class="setting-item">
                    <label for="soundSourceSelect">Sound Source:</label>
                    <select id="soundSourceSelect" class="styled-select">
                      <option value="default" selected>Default</option>
                      <option value="file">Local file</option>
                      <option value="url">Online audio link</option>
                    </select>
                  </div>
                  
                  <div id="soundSourceControls">
                    <div id="fileInputContainer" class="file-input-container" style="display: none;">
                      <label for="alertSoundFile" class="file-input-label">Choose MP3 file:</label>
                      <div class="file-input-wrapper">
                        <input type="file" id="alertSoundFile" accept="audio/mp3,audio/mpeg" class="file-input" />
                      </div>
                    </div>
                    
                    <div id="urlInputContainer" class="url-input-container" style="display: none;">
                      <label for="alertSoundUrl" class="url-input-label">MP3 URL:</label>
                      <input type="text" id="alertSoundUrl" class="styled-select url-input" placeholder="Paste direct MP3 URL here (must end with .mp3)" pattern=".*\.mp3$" />
                    </div>
                  </div>
                  
                  <div class="spacer-md"></div>
                  <div class="sound-controls">
                    <button id="playPauseSoundBtn" class="btn btn-secondary" title="Play/Pause">
                      <span id="playPauseIcon" class="sound-icon">&#9654;</span>
                    </button>
                    <button id="stopSoundBtn" class="btn btn-outline" title="Stop">
                      <span class="sound-icon">&#9632;</span>
                    </button>
                  </div>
                  
                  <div id="soundErrorMsg" class="error-message" style="display: none;"></div>
                </div>
                <p class="setting-description">
                  Configure custom alert sounds or use the default notification sound
                </p>
              </div>
            </div>
          </section>

          <section class="settings-section">
            <div class="section-header">
              <h2 class="section-title">Notification Settings</h2>
              <p class="section-description">
                Configure how you want to be notified about tasks
              </p>
            </div>

            <div class="settings-grid">
              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Desktop Notifications</h3>
                  <label class="toggle-switch">
                    <input type="checkbox" id="desktopNotificationsToggle" />
                    <span class="slider"></span>
                  </label>
                </div>
                <p class="setting-description">
                  Show browser notifications when tasks become available or incomplete tasks are detected
                </p>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Mouse Movement Detection</h3>
                  <label class="toggle-switch">
                    <input type="checkbox" id="mouseMovementToggle" />
                    <span class="slider"></span>
                  </label>
                </div>
                <p class="setting-description">
                  Automatically stop alarm sounds when mouse movement is detected
                </p>
              </div>
            </div>
          </section>

          <section class="settings-section">
            <div class="section-header">
              <h2 class="section-title">Advanced Features</h2>
              <p class="section-description">
                Configure advanced monitoring and error handling features
              </p>
            </div>

            <div class="settings-grid">
              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Incomplete Tasks Handling</h3>
                  <label class="toggle-switch">
                    <input type="checkbox" id="incompleteTasksToggle" />
                    <span class="slider"></span>
                  </label>
                </div>
                <p class="setting-description">
                  Detect and handle incomplete tasks with popup notifications
                </p>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Enhanced Error Detection</h3>
                  <label class="toggle-switch">
                    <input type="checkbox" id="errorDetectionToggle" />
                    <span class="slider"></span>
                  </label>
                </div>
                <p class="setting-description">
                  Automatically detect and handle 403 errors and other issues
                </p>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Theme Preference</h3>
                  <label class="toggle-switch">
                    <input type="checkbox" id="themeToggle" />
                    <span class="slider"></span>
                  </label>
                </div>
                <p class="setting-description">
                  Switch between light and dark mode themes
                </p>
                <div class="status-indicator">
                  <div class="status-dot" id="themeStatusDot"></div>
                  <span id="themeStatusText">Light Mode</span>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- Filtering Tab -->
        <div id="filtering" class="tab-content">
          <section class="settings-section">
            <div class="section-header">
              <h2 class="section-title">Filter Settings</h2>
              <p class="section-description">
                Configure task filtering criteria to monitor only specific types of tasks
              </p>
            </div>

            <div class="settings-grid">
              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Filtering Master Switch</h3>
                  <label class="toggle-switch large">
                    <input type="checkbox" id="filteringToggle" />
                    <span class="slider"></span>
                  </label>
                </div>
                <p class="setting-description">
                  Enable or disable task filtering. When disabled, all tasks will be monitored regardless of filter settings.
                </p>
                <div class="status-indicator">
                  <div class="status-dot" id="filteringStatusDot"></div>
                  <span id="filteringStatusText">Filtering Disabled</span>
                </div>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Task Type Filter</h3>
                  <div class="filter-status" id="taskTypeFilterStatus">
                    <span class="filter-badge">0 selected</span>
                  </div>
                </div>
                <div class="setting-content">
                  <div class="checkbox-group" id="taskTypeFilter">
                    <label class="checkbox-option">
                      <input type="checkbox" name="taskType" value="search" />
                      <span class="checkbox-custom"></span>
                      <span class="checkbox-label">Search Evaluation</span>
                    </label>
                    <label class="checkbox-option">
                      <input type="checkbox" name="taskType" value="comparison" />
                      <span class="checkbox-custom"></span>
                      <span class="checkbox-label">Side-by-Side</span>
                    </label>
                    <label class="checkbox-option">
                      <input type="checkbox" name="taskType" value="quality" />
                      <span class="checkbox-custom"></span>
                      <span class="checkbox-label">Quality Rating</span>
                    </label>
                    <label class="checkbox-option">
                      <input type="checkbox" name="taskType" value="relevance" />
                      <span class="checkbox-custom"></span>
                      <span class="checkbox-label">Relevance Rating</span>
                    </label>
                  </div>
                </div>
                <p class="setting-description">
                  Only monitor tasks of the selected types
                </p>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Duration Filter</h3>
                  <div class="filter-status" id="durationFilterStatus">
                    <span class="filter-badge">Any duration</span>
                  </div>
                </div>
                <div class="setting-content">
                  <div class="range-inputs">
                    <div class="input-group">
                      <label for="minDuration">Min (minutes):</label>
                      <input type="number" id="minDuration" min="0" max="60" step="1" class="styled-input" />
                    </div>
                    <div class="input-group">
                      <label for="maxDuration">Max (minutes):</label>
                      <input type="number" id="maxDuration" min="0" max="120" step="1" class="styled-input" />
                    </div>
                  </div>
                </div>
                <p class="setting-description">
                  Filter tasks by estimated completion time
                </p>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Time Restrictions</h3>
                  <label class="toggle-switch">
                    <input type="checkbox" id="timeRangeToggle" />
                    <span class="slider"></span>
                  </label>
                </div>
                <div class="setting-content">
                  <div id="timeRangeContainer" style="display: none;">
                    <div class="input-group">
                      <label for="timeRangeStart">Start Time:</label>
                      <input type="time" id="timeRangeStart" class="styled-input" value="09:00" />
                    </div>
                    <div class="input-group">
                      <label for="timeRangeEnd">End Time:</label>
                      <input type="time" id="timeRangeEnd" class="styled-input" value="17:00" />
                    </div>
                  </div>
                </div>
                <p class="setting-description">
                  Only monitor during specific hours
                </p>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Days of Week</h3>
                  <div class="filter-status" id="daysFilterStatus">
                    <span class="filter-badge">All days</span>
                  </div>
                </div>
                <div class="setting-content">
                  <div class="checkbox-group day-selector" id="daysOfWeekFilter">
                    <label class="checkbox-option">
                      <input type="checkbox" name="day" value="1" checked />
                      <span class="checkbox-custom"></span>
                      <span class="checkbox-label">Mon</span>
                    </label>
                    <label class="checkbox-option">
                      <input type="checkbox" name="day" value="2" checked />
                      <span class="checkbox-custom"></span>
                      <span class="checkbox-label">Tue</span>
                    </label>
                    <label class="checkbox-option">
                      <input type="checkbox" name="day" value="3" checked />
                      <span class="checkbox-custom"></span>
                      <span class="checkbox-label">Wed</span>
                    </label>
                    <label class="checkbox-option">
                      <input type="checkbox" name="day" value="4" checked />
                      <span class="checkbox-custom"></span>
                      <span class="checkbox-label">Thu</span>
                    </label>
                    <label class="checkbox-option">
                      <input type="checkbox" name="day" value="5" checked />
                      <span class="checkbox-custom"></span>
                      <span class="checkbox-label">Fri</span>
                    </label>
                    <label class="checkbox-option">
                      <input type="checkbox" name="day" value="6" />
                      <span class="checkbox-custom"></span>
                      <span class="checkbox-label">Sat</span>
                    </label>
                    <label class="checkbox-option">
                      <input type="checkbox" name="day" value="7" />
                      <span class="checkbox-custom"></span>
                      <span class="checkbox-label">Sun</span>
                    </label>
                  </div>
                </div>
                <p class="setting-description">
                  Only monitor on selected days
                </p>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Minimum Reward</h3>
                  <div class="filter-status" id="rewardFilterStatus">
                    <span class="filter-badge">Any reward</span>
                  </div>
                </div>
                <div class="setting-content">
                  <div class="input-group">
                    <label for="minReward">Minimum Reward ($):</label>
                    <input type="number" id="minReward" min="0" max="10" step="0.1" class="styled-input" />
                  </div>
                </div>
                <p class="setting-description">
                  Only monitor tasks with minimum reward amount
                </p>
              </div>

              <div class="setting-card">
                <div class="setting-header">
                  <h3 class="setting-title">Filter Presets</h3>
                </div>
                <div class="setting-content">
                  <div class="input-group">
                    <label for="presetSelect">Select Preset:</label>
                    <select id="presetSelect" class="styled-select">
                      <option value="">-- Select a preset --</option>
                      <option value="workHours">Work Hours</option>
                      <option value="highReward">High Reward</option>
                      <option value="quickTasks">Quick Tasks</option>
                    </select>
                  </div>
                  <div class="button-group">
                    <button id="savePresetBtn" class="btn btn-secondary">Save Current</button>
                    <button id="deletePresetBtn" class="btn btn-outline">Delete</button>
                  </div>
                </div>
                <p class="setting-description">
                  Save and load filter configurations
                </p>
              </div>
            </div>
          </section>
        </div>

        <section class="info-section">
          <div class="info-card">
            <h3 class="info-title">üöÄ How it works</h3>
            <ol class="info-list">
              <li>
                Navigate to
                <code>https://www.raterhub.com/evaluation/rater</code>
              </li>
              <li>Enable the monitor using the toggle above</li>
              <li>
                The extension will automatically refresh the page at your chosen
                interval
              </li>
              <li>When tasks become available, you'll hear an alarm sound</li>
              <li>
                If "Auto Click" mode is enabled, the extension will
                automatically acquire tasks
              </li>
            </ol>
          </div>

          <div class="info-card">
            <h3 class="info-title">‚ö†Ô∏è Important Notes</h3>
            <ul class="info-list">
              <li>
                Keep the RaterHub tab open and visible for best performance
              </li>
              <li>Lower refresh intervals may consume more resources</li>
              <li>
                The extension only works on the official RaterHub evaluation
                page
              </li>
              <li>Make sure your browser allows sound notifications</li>
            </ul>
          </div>
        </section>
      </main>

      <footer class="options-footer">
        <div class="footer-content">
          <div class="setting-group">
            <h3>Test Button</h3>
            <div class="setting-item">
              <label class="toggle-label">
                <input type="checkbox" id="showTestButton">
                <span class="toggle-slider"></span>
                Show test button on main page
              </label>
              <p class="setting-description">Enable to show a test button that simulates finding an acquire button for testing purposes.</p>
            </div>
          </div>

          <div class="setting-group">
            <h3>Reset to Defaults</h3>
            <button id="resetBtn" class="reset-btn">Reset All Settings</button>
          </div>
          
          <div class="save-status">
            <span id="saveStatus" class="save-message"
              >Settings saved automatically</span
            >
          </div>
        </div>
      </footer>
    </div>

    <script src="options.js"></script>
  </body>
</html>
